<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—è –¢–µ—Ç—Ä–∞–¥—å</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f0f0f0;
            color: #333;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä A3 (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π/–ª–∞–Ω–¥—à–∞—Ñ—Ç) */
        .a3-container {
            width: 420mm;
            min-height: 297mm;
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* –ß–ï–†–ù–ê–Ø –®–ê–ü–ö–ê */
        .header {
            background-color: #000;
            color: white;
            padding: 35px 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .name-title h1 {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .name-title p {
            font-size: 20px;
            color: #ccc;
            font-weight: 300;
        }

        .contacts {
            text-align: right;
            line-height: 1.8;
        }

        .contacts a {
            color: white;
            text-decoration: none;
            display: block;
            transition: color 0.3s;
            font-size: 18px;
        }

        .contacts a:hover {
            color: #aaa;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ */
        .main-content {
            display: flex;
            flex: 1;
            padding: 0;
            height: calc(100% - 130px);
        }

        /* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –º–µ–Ω—é —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –±–ª–æ–∫–æ–≤ */
        .left-column {
            flex: 0.8;
            background-color: #f9f9f9;
            padding: 20px;
            display: flex;
            flex-direction: column;
            border-right: 2px solid #e0e0e0;
            gap: 30px;
        }

        /* –†–∞–∑–¥–µ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ */
        .pages-section {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #000;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ */
        .page-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .control-btn {
            padding: 12px 15px;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-btn:hover {
            background: #34495e;
            transform: translateX(5px);
        }

        .control-btn.add-page { 
            background: #2ecc71; 
        }
        .control-btn.add-page:hover { 
            background: #27ae60; 
        }

        .control-btn.rename-page { 
            background: #3498db; 
        }
        .control-btn.rename-page:hover { 
            background: #2980b9; 
        }

        .control-btn.delete-page { 
            background: #e74c3c; 
        }
        .control-btn.delete-page:hover { 
            background: #c0392b; 
        }

        /* –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü */
        .pages-list {
            flex: 1;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            background: white;
        }

        .page-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .page-item:hover {
            background: #f0f0f0;
            border-color: #3498db;
        }

        .page-item.active {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }

        .page-actions {
            display: flex;
            gap: 5px;
        }

        .page-action-btn {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 14px;
            padding: 2px 5px;
            border-radius: 3px;
            transition: all 0.3s;
        }

        .page-item.active .page-action-btn {
            color: white;
        }

        .page-action-btn:hover {
            background: rgba(0,0,0,0.1);
        }

        .page-action-btn.delete:hover {
            color: #e74c3c;
        }

        .page-action-btn.rename:hover {
            color: #3498db;
        }

        /* –†–∞–∑–¥–µ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞–º–∏ */
        .blocks-section {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞–º–∏ */
        .block-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .block-btn {
            padding: 12px 15px;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .block-btn:hover {
            background: #34495e;
            transform: translateX(5px);
        }

        .block-btn.add-text { background: #9b59b6; }
        .block-btn.add-text:hover { background: #8e44ad; }

        .block-btn.add-image { background: #3498db; }
        .block-btn.add-image:hover { background: #2980b9; }

        .block-btn.add-code { background: #f39c12; }
        .block-btn.add-code:hover { background: #d35400; }

        .block-btn.edit-all { background: #2ecc71; }
        .block-btn.edit-all:hover { background: #27ae60; }

        .block-btn.delete-all { background: #e74c3c; }
        .block-btn.delete-all:hover { background: #c0392b; }

        /* –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –∫–æ–Ω—Ç–µ–Ω—Ç */
        .right-column {
            flex: 2.2;
            padding: 50px 60px;
            background-color: white;
            overflow-y: auto;
            max-height: calc(297mm - 130px);
            position: relative;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        .current-page-title {
            font-size: 28px;
            font-weight: 700;
            color: #000;
            margin-bottom: 30px;
            padding-bottom: 12px;
            border-bottom: 3px solid #000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .current-page-title.editing {
            border-color: #3498db;
        }

        .page-title-input {
            font-size: 28px;
            font-weight: 700;
            color: #000;
            background: transparent;
            border: none;
            border-bottom: 3px solid #3498db;
            width: 100%;
            outline: none;
            padding: 5px 0;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –±–ª–æ–∫–æ–≤ */
        #blocks-container {
            position: relative;
            min-height: 200px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–¥–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤ */
        .code-block {
            margin: 25px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
            position: relative;
        }

        .code-header {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 12px 20px;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .code-header-content {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .code-language {
            font-weight: 600;
        }

        .code-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
            flex: 1;
        }

        .code-action-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
            min-width: 120px;
            justify-content: center;
        }

        .code-action-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-1px);
        }

        .code-header-spacer {
            flex: 1;
            visibility: hidden;
        }

        .code-content {
            background: #1a1a1a;
            padding: 20px;
            overflow-x: auto;
        }

        .code-content pre {
            margin: 0;
            color: #f8f8f2;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 15px;
            line-height: 1.5;
            white-space: pre;
            tab-size: 4;
        }

        .code-content code {
            display: block;
        }

        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤ */
        .code-bash .code-header {
            background: #27ae60;
        }

        .code-html .code-header {
            background: #e74c3c;
        }

        .code-css .code-header {
            background: #3498db;
        }

        .code-js .code-header {
            background: #f39c12;
        }

        .code-python .code-header {
            background: #3498db;
        }

        /* –¢–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏ */
        .text-block {
            margin: 25px 0;
            padding: 25px;
            background: #f9f9f9;
            border-radius: 10px;
            border-left: 5px solid #3498db;
            position: relative;
            min-height: 100px;
        }

        .text-block.editing {
            background: #fff8e1;
            border-color: #f39c12;
        }

        .text-block-content {
            line-height: 1.8;
            font-size: 18px;
            outline: none;
            min-height: 100px;
        }

        .text-block-content:empty::before {
            content: "–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç...";
            color: #999;
            font-style: italic;
        }

        /* –ë–ª–æ–∫–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ */
        .image-block {
            margin: 25px 0;
            position: relative;
        }

        .image-block-content {
            width: 100%;
            max-width: 100%;
            border-radius: 10px;
            border: 1px solid #ddd;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .image-placeholder {
            width: 100%;
            height: 300px;
            background-color: #f5f5f5;
            border: 3px dashed #ccc;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #777;
            border-radius: 10px;
            text-align: center;
            padding: 20px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .image-placeholder:hover {
            background-color: #e8e8e8;
            border-color: #999;
        }

        .image-placeholder span {
            margin-top: 15px;
            font-size: 14px;
            color: #999;
        }

        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞–º–∏ */
        .block-controls-inline {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }

        .text-block:hover .block-controls-inline,
        .code-block:hover .block-controls-inline,
        .image-block:hover .block-controls-inline {
            opacity: 1;
        }

        .inline-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s;
        }

        .inline-btn.edit {
            background: #3498db;
            color: white;
        }

        .inline-btn.edit:hover {
            background: #2980b9;
            transform: scale(1.1);
        }

        .inline-btn.delete {
            background: #e74c3c;
            color: white;
        }

        .inline-btn.delete:hover {
            background: #c0392b;
            transform: scale(1.1);
        }

        .inline-btn.move-up {
            background: #2ecc71;
            color: white;
        }

        .inline-btn.move-up:hover {
            background: #27ae60;
            transform: scale(1.1);
        }

        .inline-btn.move-down {
            background: #f39c12;
            color: white;
        }

        .inline-btn.move-down:hover {
            background: #d35400;
            transform: scale(1.1);
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #e74c3c;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: #f9f9f9;
        }

        .modal-body {
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        .modal-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s;
        }

        .modal-btn.primary {
            background: #3498db;
            color: white;
        }

        .modal-btn.primary:hover {
            background: #2980b9;
        }

        .modal-btn.secondary {
            background: #95a5a6;
            color: white;
        }

        .modal-btn.secondary:hover {
            background: #7f8c8d;
        }

        /* –ü–∞–Ω–µ–ª—å –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –∫–æ–¥–∞ */
        .edit-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 1000;
            width: 300px;
            display: none;
        }

        .edit-panel.active {
            display: block;
        }

        .edit-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .edit-option {
            padding: 15px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .edit-option:hover {
            background: #e9ecef;
            border-color: #3498db;
            transform: translateX(5px);
        }

        /* Drag and drop —Å—Ç–∏–ª–∏ */
        .blocks-container .sortable-ghost {
            opacity: 0.4;
            background: #f8f9fa;
        }

        .blocks-container .sortable-chosen {
            background: #fff8e1;
        }

        .blocks-container .sortable-drag {
            opacity: 0.8;
            transform: rotate(3deg);
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .page-stats {
            font-size: 14px;
            color: #666;
            font-style: italic;
            margin-top: 5px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–µ—á–∞—Ç–∏ */
        @media print {
            body {
                background: none;
                padding: 0;
                margin: 0;
            }
            .a3-container {
                width: 420mm;
                height: 297mm;
                box-shadow: none;
                margin: 0;
                page-break-after: always;
            }
            .left-column {
                display: none;
            }
            .right-column {
                overflow: visible;
                max-height: none;
                padding: 30px;
            }
            .block-controls-inline {
                display: none;
            }
            .code-action-btn {
                display: none;
            }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —ç–∫—Ä–∞–Ω–æ–≤ */
        @media screen and (max-width: 420mm) {
            body {
                padding: 10px;
                align-items: flex-start;
                overflow-x: auto;
            }
            .a3-container {
                width: 100%;
                min-height: auto;
                margin: 10px auto;
            }
            .main-content {
                flex-direction: column;
            }
            .left-column {
                width: 100%;
                border-right: none;
                border-bottom: 2px solid #e0e0e0;
                padding: 20px;
            }
            .page-controls, .block-controls {
                flex-direction: row;
                flex-wrap: wrap;
            }
            .control-btn, .block-btn {
                flex: 1;
                min-width: 150px;
            }
            .right-column {
                padding: 30px;
            }
            .code-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            .code-header-content, .code-actions, .code-header-spacer {
                width: 100%;
                justify-content: center;
            }
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–æ—Ä–º–∞—Ç–µ */
        .format-info {
            position: absolute;
            bottom: 10px;
            right: 15px;
            color: #999;
            font-size: 12px;
        }
    </style>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ SortableJS –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
</head>
<body>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="modal" id="pageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="pageName">–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:</label>
                    <input type="text" id="pageName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã">
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn primary" onclick="savePage()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –∫–æ–¥–∞ -->
    <div class="edit-panel" id="codeOptionsPanel">
        <h3 style="margin-bottom: 15px; text-align: center;">–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
        <div class="edit-options">
            <div class="edit-option" onclick="addCodeBlock('bash')">
                <strong>Bash/Shell</strong>
                <div style="font-size: 12px; color: #666;">–¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã</div>
            </div>
            <div class="edit-option" onclick="addCodeBlock('html')">
                <strong>HTML</strong>
                <div style="font-size: 12px; color: #666;">–í–µ–±-—Ä–∞–∑–º–µ—Ç–∫–∞</div>
            </div>
            <div class="edit-option" onclick="addCodeBlock('css')">
                <strong>CSS</strong>
                <div style="font-size: 12px; color: #666;">–°—Ç–∏–ª–∏</div>
            </div>
            <div class="edit-option" onclick="addCodeBlock('js')">
                <strong>JavaScript</strong>
                <div style="font-size: 12px; color: #666;">–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
            </div>
            <div class="edit-option" onclick="addCodeBlock('python')">
                <strong>Python</strong>
                <div style="font-size: 12px; color: #666;">–°–∫—Ä–∏–ø—Ç—ã</div>
            </div>
            <button class="modal-btn secondary" onclick="hideCodeOptions()" style="margin-top: 10px; width: 100%;">
                –û—Ç–º–µ–Ω–∞
            </button>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä A3 -->
    <div class="a3-container">

        <!-- –ß–ï–†–ù–ê–Ø –®–ê–ü–ö–ê -->
        <header class="header">
            <div class="name-title">
                <h1 contenteditable="true" id="name-title">–ú–æ—è –¢–µ—Ç—Ä–∞–¥—å</h1>
                <p contenteditable="true" id="name-subtitle">–°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –±–ª–æ–∫–æ–≤</p>
            </div>
            <div class="contacts">
                <div contenteditable="true" id="contact-phone">–í—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü: <span id="pageCount">1</span></div>
                <div contenteditable="true" id="contact-date">–î–∞—Ç–∞: <span id="currentDate">2024</span></div>
                <div contenteditable="true" id="contact-blocks">–ë–ª–æ–∫–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: <span id="blockCount">3</span></div>
            </div>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ -->
        <div class="main-content">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –∏ –±–ª–æ–∫–∞–º–∏ -->
            <section class="left-column">
                <!-- –†–∞–∑–¥–µ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ -->
                <div class="pages-section">
                    <h3 class="section-title">
                        –°—Ç—Ä–∞–Ω–∏—Ü—ã
                        <span id="pagesCount">1</span>
                    </h3>
                    
                    <div class="page-controls">
                        <button class="control-btn add-page" onclick="openAddPageModal()">
                            <span>‚ûï</span> –ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
                        </button>
                        <button class="control-btn rename-page" onclick="renameCurrentPage()">
                            <span>‚úèÔ∏è</span> –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å
                        </button>
                        <button class="control-btn delete-page" onclick="deleteCurrentPage()">
                            <span>üóëÔ∏è</span> –£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                        </button>
                    </div>

                    <!-- –°–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü -->
                    <div class="pages-list" id="pagesList">
                        <!-- –°—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <!-- –†–∞–∑–¥–µ–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞–º–∏ -->
                <div class="blocks-section">
                    <h3 class="section-title">–ë–ª–æ–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</h3>
                    
                    <div class="block-controls">
                        <button class="block-btn add-text" onclick="addTextBlock()">
                            <span>üìù</span> –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç
                        </button>
                        <button class="block-btn add-image" onclick="addImageBlock()">
                            <span>üñºÔ∏è</span> –î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                        </button>
                        <button class="block-btn add-code" onclick="showCodeOptions()">
                            <span>üíª</span> –î–æ–±–∞–≤–∏—Ç—å –∫–æ–¥
                        </button>
                        <button class="block-btn edit-all" onclick="toggleEditMode()">
                            <span>‚úèÔ∏è</span> –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                        </button>
                        <button class="block-btn delete-all" onclick="clearAllBlocks()">
                            <span>üóëÔ∏è</span> –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –±–ª–æ–∫–∏
                        </button>
                    </div>
                </div>
            </section>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
            <section class="right-column">
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
                <div class="current-page-title" id="currentPageTitle">
                    <span id="pageTitleText">–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</span>
                    <button class="inline-btn edit" onclick="editPageTitle()" style="position: static; opacity: 1;">‚úèÔ∏è</button>
                </div>

                <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤ -->
                <div id="blocks-container" class="blocks-container">
                    <!-- –ë–ª–æ–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    
                    <!-- –ü—Ä–∏–º–µ—Ä –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞ -->
                    <div class="text-block" data-block-id="1" data-block-type="text">
                        <div class="block-controls-inline">
                            <button class="inline-btn edit" onclick="editTextBlock(this)">‚úèÔ∏è</button>
                            <button class="inline-btn delete" onclick="deleteBlock(this)">üóëÔ∏è</button>
                            <button class="inline-btn move-up" onclick="moveBlockUp(this)">‚¨ÜÔ∏è</button>
                            <button class="inline-btn move-down" onclick="moveBlockDown(this)">‚¨áÔ∏è</button>
                        </div>
                        <div class="text-block-content" contenteditable="true">
                            <p><strong>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ú–æ—é –¢–µ—Ç—Ä–∞–¥—å!</strong></p>
                            <p>–≠—Ç–æ –≤–∞—à–∞ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞. –í—ã –º–æ–∂–µ—Ç–µ:</p>
                            <ul>
                                <li>–°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
                                <li>–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
                                <li>–£–¥–∞–ª—è—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã</li>
                                <li>–î–æ–±–∞–≤–ª—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –±–ª–æ–∫–∏</li>
                                <li>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ</li>
                            </ul>
                            <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å —Å–ª–µ–≤–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.</p>
                        </div>
                    </div>

                    <!-- –ü—Ä–∏–º–µ—Ä –∫–æ–¥–æ–≤–æ–≥–æ –±–ª–æ–∫–∞ -->
                    <div class="code-block code-bash" data-block-id="2" data-block-type="code">
                        <div class="block-controls-inline">
                            <button class="inline-btn edit" onclick="editCodeBlock(this)">‚úèÔ∏è</button>
                            <button class="inline-btn delete" onclick="deleteBlock(this)">üóëÔ∏è</button>
                            <button class="inline-btn move-up" onclick="moveBlockUp(this)">‚¨ÜÔ∏è</button>
                            <button class="inline-btn move-down" onclick="moveBlockDown(this)">‚¨áÔ∏è</button>
                        </div>
                        <div class="code-header">
                            <div class="code-header-spacer"></div>
                            <div class="code-header-content">
                                <span class="code-language">Bash/Shell</span>
                            </div>
                            <div class="code-actions">
                                <button class="code-action-btn" onclick="copyCode(this)">
                                    üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
                                </button>
                            </div>
                            <div class="code-header-spacer"></div>
                        </div>
                        <div class="code-content">
                            <pre><code># –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ç–µ—Ç—Ä–∞–¥—å!
echo "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
uname -a
whoami

# –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
date
cal
pwd</code></pre>
                        </div>
                    </div>

                    <!-- –ü—Ä–∏–º–µ—Ä –±–ª–æ–∫–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º -->
                    <div class="image-block" data-block-id="3" data-block-type="image">
                        <div class="block-controls-inline">
                            <button class="inline-btn edit" onclick="editImageBlock(this)">‚úèÔ∏è</button>
                            <button class="inline-btn delete" onclick="deleteBlock(this)">üóëÔ∏è</button>
                            <button class="inline-btn move-up" onclick="moveBlockUp(this)">‚¨ÜÔ∏è</button>
                            <button class="inline-btn move-down" onclick="moveBlockDown(this)">‚¨áÔ∏è</button>
                        </div>
                        <div class="image-placeholder" onclick="uploadImage(this)">
                            –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                            <span>–î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ —Ñ–æ—Ç–æ</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        
        <div class="format-info">–§–æ—Ä–º–∞—Ç: A3 (297√ó420 –º–º)</div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let pages = [];
        let currentPageId = 1;
        let blockCounter = 3;
        let isEditMode = false;
        let isRenamingPage = false;
        let sortableInstance = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
            updateDate();
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
            loadFromStorage();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
            initSortable();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            updateStats();
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞—Ç—ã
        function updateDate() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('ru-RU', options);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
        function initSortable() {
            const container = document.getElementById('blocks-container');
            sortableInstance = new Sortable(container, {
                animation: 150,
                ghostClass: 'sortable-ghost',
                chosenClass: 'sortable-chosen',
                dragClass: 'sortable-drag',
                onEnd: function() {
                    saveCurrentPage();
                    updateStats();
                }
            });
        }

        // =================== –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–¢–†–ê–ù–ò–¶–ê–ú–ò ===================

        // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function openAddPageModal() {
            document.getElementById('modalTitle').textContent = '–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞';
            document.getElementById('pageName').value = '';
            document.getElementById('pageName').placeholder = '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã';
            document.getElementById('pageModal').classList.add('active');
            isRenamingPage = false;
            document.getElementById('pageName').focus();
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
        function renameCurrentPage() {
            const currentPage = getCurrentPage();
            if (currentPage) {
                document.getElementById('modalTitle').textContent = '–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É';
                document.getElementById('pageName').value = currentPage.name;
                document.getElementById('pageModal').classList.add('active');
                isRenamingPage = true;
                document.getElementById('pageName').focus();
            }
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function closeModal() {
            document.getElementById('pageModal').classList.remove('active');
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function savePage() {
            const pageName = document.getElementById('pageName').value.trim();
            
            if (!pageName) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã');
                return;
            }

            if (isRenamingPage) {
                // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const currentPage = getCurrentPage();
                if (currentPage) {
                    currentPage.name = pageName;
                    document.getElementById('pageTitleText').textContent = pageName;
                    updatePagesList();
                    saveToStorage();
                }
            } else {
                // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const newPageId = generatePageId();
                const newPage = {
                    id: newPageId,
                    name: pageName,
                    blocks: [],
                    blockCounter: 0
                };
                
                pages.push(newPage);
                currentPageId = newPageId;
                updatePagesList();
                loadPage(newPageId);
                saveToStorage();
            }
            
            closeModal();
            updateStats();
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function deleteCurrentPage() {
            if (pages.length <= 1) {
                alert('–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–∞–Ω–∏—Ü—É!');
                return;
            }

            const currentPage = getCurrentPage();
            if (!currentPage) return;

            if (confirm(`–£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É "${currentPage.name}"?`)) {
                // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const currentIndex = pages.findIndex(p => p.id === currentPageId);
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫–∞–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
                let newPageId;
                if (currentIndex > 0) {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    newPageId = pages[currentIndex - 1].id;
                } else {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    newPageId = pages[currentIndex + 1].id;
                }
                
                // –£–¥–∞–ª—è–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
                pages = pages.filter(p => p.id !== currentPageId);
                currentPageId = newPageId;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                updatePagesList();
                loadPage(newPageId);
                saveToStorage();
                updateStats();
                
                alert('–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–¥–∞–ª–µ–Ω–∞!');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function loadPage(pageId) {
            const page = pages.find(p => p.id === pageId);
            if (!page) return;

            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            document.getElementById('pageTitleText').textContent = page.name;
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–ª–æ–∫–æ–≤
            const blocksContainer = document.getElementById('blocks-container');
            blocksContainer.innerHTML = '';
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–ª–æ–∫–∏
            if (page.blocks && page.blocks.length > 0) {
                page.blocks.forEach(blockData => {
                    const blockElement = createBlockElement(blockData);
                    if (blockElement) {
                        blocksContainer.appendChild(blockElement);
                    }
                });
                blockCounter = page.blockCounter || page.blocks.length;
            } else {
                // –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                const emptyBlock = createTextBlock('–ü—É—Å—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞. –ù–∞—á–Ω–∏—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å –±–ª–æ–∫–∏!');
                blocksContainer.appendChild(emptyBlock);
                blockCounter = 1;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            updateStats();
            
            // –ü–æ–º–µ—á–∞–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω—É—é
            updatePagesList();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function generatePageId() {
            return Date.now();
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function getCurrentPage() {
            return pages.find(p => p.id === currentPageId);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
        function updatePagesList() {
            const pagesList = document.getElementById('pagesList');
            pagesList.innerHTML = '';
            
            pages.forEach(page => {
                const pageItem = document.createElement('div');
                pageItem.className = `page-item ${page.id === currentPageId ? 'active' : ''}`;
                pageItem.dataset.pageId = page.id;
                
                // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                const blockCount = page.blocks ? page.blocks.length : 0;
                
                pageItem.innerHTML = `
                    <div>
                        <strong>${page.name}</strong>
                        <div class="page-stats">${blockCount} –±–ª–æ–∫–æ–≤</div>
                    </div>
                    <div class="page-actions">
                        <button class="page-action-btn rename" onclick="renamePage(${page.id})" title="–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å">‚úèÔ∏è</button>
                        ${pages.length > 1 ? `<button class="page-action-btn delete" onclick="deletePage(${page.id})" title="–£–¥–∞–ª–∏—Ç—å">üóëÔ∏è</button>` : ''}
                    </div>
                `;
                
                pageItem.addEventListener('click', function(e) {
                    if (!e.target.classList.contains('page-action-btn')) {
                        switchToPage(page.id);
                    }
                });
                
                pagesList.appendChild(pageItem);
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —Å—Ç—Ä–∞–Ω–∏—Ü
            document.getElementById('pagesCount').textContent = pages.length;
            document.getElementById('pageCount').textContent = pages.length;
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
        function switchToPage(pageId) {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
            saveCurrentPage();
            
            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            currentPageId = pageId;
            loadPage(pageId);
            updatePagesList();
        }

        // –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function renamePage(pageId) {
            const page = pages.find(p => p.id === pageId);
            if (page) {
                document.getElementById('modalTitle').textContent = '–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É';
                document.getElementById('pageName').value = page.name;
                document.getElementById('pageModal').classList.add('active');
                isRenamingPage = true;
                currentPageId = pageId; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞–∫ —Ç–µ–∫—É—â—É—é
                document.getElementById('pageName').focus();
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function deletePage(pageId) {
            if (pages.length <= 1) {
                alert('–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–∞–Ω–∏—Ü—É!');
                return;
            }

            const page = pages.find(p => p.id === pageId);
            if (!page) return;

            if (confirm(`–£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É "${page.name}"?`)) {
                // –ï—Å–ª–∏ —É–¥–∞–ª—è–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –¥—Ä—É–≥—É—é
                if (pageId === currentPageId) {
                    const currentIndex = pages.findIndex(p => p.id === pageId);
                    let newPageId;
                    
                    if (currentIndex > 0) {
                        newPageId = pages[currentIndex - 1].id;
                    } else {
                        newPageId = pages[currentIndex + 1].id;
                    }
                    
                    currentPageId = newPageId;
                }
                
                // –£–¥–∞–ª—è–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
                pages = pages.filter(p => p.id !== pageId);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                updatePagesList();
                loadPage(currentPageId);
                saveToStorage();
                updateStats();
                
                alert('–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–¥–∞–ª–µ–Ω–∞!');
            }
        }

        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function editPageTitle() {
            const titleElement = document.getElementById('pageTitleText');
            const titleContainer = document.getElementById('currentPageTitle');
            
            titleContainer.classList.add('editing');
            
            const input = document.createElement('input');
            input.type = 'text';
            input.className = 'page-title-input';
            input.value = titleElement.textContent;
            
            titleContainer.innerHTML = '';
            titleContainer.appendChild(input);
            input.focus();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    savePageTitle();
                }
            });
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞
            input.addEventListener('blur', function() {
                savePageTitle();
            });
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function savePageTitle() {
            const titleContainer = document.getElementById('currentPageTitle');
            const input = titleContainer.querySelector('.page-title-input');
            const newTitle = input ? input.value.trim() : '';
            
            if (newTitle) {
                const currentPage = getCurrentPage();
                if (currentPage) {
                    currentPage.name = newTitle;
                    titleContainer.classList.remove('editing');
                    titleContainer.innerHTML = `
                        <span id="pageTitleText">${newTitle}</span>
                        <button class="inline-btn edit" onclick="editPageTitle()" style="position: static; opacity: 1;">‚úèÔ∏è</button>
                    `;
                    updatePagesList();
                    saveToStorage();
                }
            } else {
                // –û—Ç–º–µ–Ω—è–µ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                titleContainer.classList.remove('editing');
                const currentPage = getCurrentPage();
                if (currentPage) {
                    titleContainer.innerHTML = `
                        <span id="pageTitleText">${currentPage.name}</span>
                        <button class="inline-btn edit" onclick="editPageTitle()" style="position: static; opacity: 1;">‚úèÔ∏è</button>
                    `;
                }
            }
        }

        // =================== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ë–õ–û–ö–ê–ú–ò ===================

        // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞
        function addTextBlock(initialContent = '') {
            const currentPage = getCurrentPage();
            if (!currentPage) return;

            blockCounter++;
            const blockId = `${currentPage.id}_${blockCounter}`;
            
            const newBlock = {
                id: blockId,
                type: 'text',
                content: initialContent || '<p>–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç –∑–¥–µ—Å—å...</p>'
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
            if (!currentPage.blocks) currentPage.blocks = [];
            currentPage.blocks.push(newBlock);
            currentPage.blockCounter = blockCounter;
            
            // –°–æ–∑–¥–∞–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –±–ª–æ–∫–∞
            const blockElement = createTextBlockElement(newBlock);
            const blocksContainer = document.getElementById('blocks-container');
            blocksContainer.appendChild(blockElement);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º
            saveCurrentPage();
            updateStats();
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–æ–≤–æ–º—É –±–ª–æ–∫—É –∏ —Ñ–æ–∫—É—Å
            setTimeout(() => {
                blockElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                const content = blockElement.querySelector('.text-block-content');
                content.focus();
            }, 100);
            
            return blockElement;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
        function addImageBlock(imageUrl = '') {
            const currentPage = getCurrentPage();
            if (!currentPage) return;

            blockCounter++;
            const blockId = `${currentPage.id}_${blockCounter}`;
            
            const newBlock = {
                id: blockId,
                type: 'image',
                content: imageUrl
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
            if (!currentPage.blocks) currentPage.blocks = [];
            currentPage.blocks.push(newBlock);
            currentPage.blockCounter = blockCounter;
            
            // –°–æ–∑–¥–∞–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –±–ª–æ–∫–∞
            const blockElement = createImageBlockElement(newBlock);
            const blocksContainer = document.getElementById('blocks-container');
            blocksContainer.appendChild(blockElement);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º
            saveCurrentPage();
            updateStats();
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–æ–≤–æ–º—É –±–ª–æ–∫—É
            setTimeout(() => {
                blockElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
            
            return blockElement;
        }

        // –ü–æ–∫–∞–∑ –ø–∞–Ω–µ–ª–∏ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –∫–æ–¥–∞
        function showCodeOptions() {
            document.getElementById('codeOptionsPanel').classList.add('active');
        }

        // –°–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –∫–æ–¥–∞
        function hideCodeOptions() {
            document.getElementById('codeOptionsPanel').classList.remove('active');
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–¥–æ–≤–æ–≥–æ –±–ª–æ–∫–∞
        function addCodeBlock(language) {
            hideCodeOptions();
            
            const currentPage = getCurrentPage();
            if (!currentPage) return;

            blockCounter++;
            const blockId = `${currentPage.id}_${blockCounter}`;
            
            const codeExamples = {
                bash: `# –ü—Ä–∏–º–µ—Ä Bash —Å–∫—Ä–∏–ø—Ç–∞
echo "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"
ls -la
cd /path/to/directory
sudo apt update && sudo apt upgrade`,
                
                html: `<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã</title>
</head>
<body>
    <h1>–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!</h1>
    <p>–≠—Ç–æ –ø—Ä–∏–º–µ—Ä HTML –∫–æ–¥–∞.</p>
</body>
</html>`,
                
                css: `/* –ü—Ä–∏–º–µ—Ä CSS –∫–æ–¥–∞ */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.header {
    background: #2c3e50;
    color: white;
    padding: 20px;
    border-radius: 8px;
}`,
                
                js: `// –ü—Ä–∏–º–µ—Ä JavaScript –∫–æ–¥–∞
function calculateSum(a, b) {
    return a + b;
}

const multiply = (x, y) => x * y;

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const result = calculateSum(5, 3);
console.log(\`–†–µ–∑—É–ª—å—Ç–∞—Ç: \${result}\`);`,
                
                python: `# –ü—Ä–∏–º–µ—Ä Python –∫–æ–¥–∞
def fibonacci(n):
    """–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —á–∏—Å–µ–ª –§–∏–±–æ–Ω–∞—á—á–∏"""
    a, b = 0, 1
    for _ in range(n):
        yield a
        a, b = b, a + b

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
for num in fibonacci(10):
    print(num)`
            };
            
            const languageNames = {
                bash: 'Bash/Shell',
                html: 'HTML',
                css: 'CSS',
                js: 'JavaScript',
                python: 'Python'
            };
            
            const newBlock = {
                id: blockId,
                type: 'code',
                content: {
                    language: language,
                    code: codeExamples[language] || '// –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å...'
                }
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
            if (!currentPage.blocks) currentPage.blocks = [];
            currentPage.blocks.push(newBlock);
            currentPage.blockCounter = blockCounter;
            
            // –°–æ–∑–¥–∞–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –±–ª–æ–∫–∞
            const blockElement = createCodeBlockElement(newBlock);
            const blocksContainer = document.getElementById('blocks-container');
            blocksContainer.appendChild(blockElement);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º
            saveCurrentPage();
            updateStats();
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–æ–≤–æ–º—É –±–ª–æ–∫—É
            setTimeout(() => {
                blockElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
            
            return blockElement;
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞
        function deleteBlock(button) {
            const block = button.closest('[data-block-id]');
            const blockId = block.dataset.blockId;
            
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –±–ª–æ–∫?')) {
                // –ê–Ω–∏–º–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è
                block.style.opacity = '0';
                block.style.transform = 'translateX(-100px)';
                block.style.transition = 'all 0.3s';
                
                setTimeout(() => {
                    block.remove();
                    
                    // –£–¥–∞–ª—è–µ–º –±–ª–æ–∫ –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                    const currentPage = getCurrentPage();
                    if (currentPage && currentPage.blocks) {
                        currentPage.blocks = currentPage.blocks.filter(b => b.id !== blockId);
                        saveCurrentPage();
                        updateStats();
                    }
                }, 300);
            }
        }

        // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –±–ª–æ–∫–∞ –≤–≤–µ—Ä—Ö
        function moveBlockUp(button) {
            const block = button.closest('[data-block-id]');
            const prevBlock = block.previousElementSibling;
            
            if (prevBlock) {
                block.parentNode.insertBefore(block, prevBlock);
                saveCurrentPage();
                updateStats();
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –±–ª–æ–∫—É
                setTimeout(() => {
                    block.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
            }
        }

        // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –±–ª–æ–∫–∞ –≤–Ω–∏–∑
        function moveBlockDown(button) {
            const block = button.closest('[data-block-id]');
            const nextBlock = block.nextElementSibling;
            
            if (nextBlock) {
                block.parentNode.insertBefore(nextBlock, block);
                saveCurrentPage();
                updateStats();
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –±–ª–æ–∫—É
                setTimeout(() => {
                    block.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
            }
        }

        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞
        function editTextBlock(button) {
            const block = button.closest('.text-block');
            block.classList.toggle('editing');
            
            if (block.classList.contains('editing')) {
                const content = block.querySelector('.text-block-content');
                content.focus();
                
                // –ü–æ–º–µ—â–∞–µ–º –∫—É—Ä—Å–æ—Ä –≤ –∫–æ–Ω–µ—Ü —Ç–µ–∫—Å—Ç–∞
                const range = document.createRange();
                const sel = window.getSelection();
                range.selectNodeContents(content);
                range.collapse(false);
                sel.removeAllRanges();
                sel.addRange(range);
            }
        }

        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–æ–≤–æ–≥–æ –±–ª–æ–∫–∞
        function editCodeBlock(button) {
            const block = button.closest('.code-block');
            const codeElement = block.querySelector('code');
            const currentCode = codeElement.textContent;
            
            const newCode = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –∫–æ–¥:', currentCode);
            if (newCode !== null) {
                codeElement.textContent = newCode;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const blockId = block.dataset.blockId;
                const currentPage = getCurrentPage();
                if (currentPage && currentPage.blocks) {
                    const blockData = currentPage.blocks.find(b => b.id === blockId);
                    if (blockData && blockData.type === 'code') {
                        blockData.content.code = newCode;
                        saveCurrentPage();
                    }
                }
            }
        }

        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
        function editImageBlock(button) {
            const block = button.closest('.image-block');
            
            const imageUrl = prompt('–í–≤–µ–¥–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', 'https://via.placeholder.com/600x400');
            if (imageUrl) {
                const img = document.createElement('img');
                img.src = imageUrl;
                img.alt = '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ';
                img.className = 'image-block-content';
                
                const placeholder = block.querySelector('.image-placeholder');
                if (placeholder) {
                    placeholder.replaceWith(img);
                } else {
                    const existingImg = block.querySelector('img');
                    if (existingImg) {
                        existingImg.src = imageUrl;
                    }
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const blockId = block.dataset.blockId;
                const currentPage = getCurrentPage();
                if (currentPage && currentPage.blocks) {
                    const blockData = currentPage.blocks.find(b => b.id === blockId);
                    if (blockData && blockData.type === 'image') {
                        blockData.content = imageUrl;
                        saveCurrentPage();
                    }
                }
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function uploadImage(element) {
            const imageUrl = prompt('–í–≤–µ–¥–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –¥–µ–º–æ:', 'https://via.placeholder.com/600x400');
            
            if (imageUrl !== null) {
                const finalUrl = imageUrl.trim() === '' 
                    ? 'https://via.placeholder.com/600x400/3498db/ffffff?text=–ü—Ä–∏–º–µ—Ä+–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è'
                    : imageUrl;
                
                const img = document.createElement('img');
                img.src = finalUrl;
                img.alt = '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ';
                img.className = 'image-block-content';
                
                element.replaceWith(img);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const block = img.closest('.image-block');
                const blockId = block.dataset.blockId;
                const currentPage = getCurrentPage();
                if (currentPage && currentPage.blocks) {
                    const blockData = currentPage.blocks.find(b => b.id === blockId);
                    if (blockData && blockData.type === 'image') {
                        blockData.content = finalUrl;
                        saveCurrentPage();
                    }
                }
            }
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
        function copyCode(button) {
            const codeBlock = button.closest('.code-block');
            const codeElement = codeBlock.querySelector('code');
            const codeText = codeElement.textContent;
            
            navigator.clipboard.writeText(codeText).then(() => {
                const originalText = button.textContent;
                button.innerHTML = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                button.style.background = '#27ae60';
                
                setTimeout(() => {
                    button.innerHTML = 'üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥';
                    button.style.background = '';
                }, 2000);
            }).catch(err => {
                console.error('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ', err);
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥');
            });
        }

        // –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function toggleEditMode() {
            isEditMode = !isEditMode;
            const textContents = document.querySelectorAll('.text-block-content');
            
            textContents.forEach(content => {
                content.contentEditable = isEditMode;
                if (isEditMode) {
                    content.style.border = '2px dashed #3498db';
                    content.style.padding = '10px';
                    content.style.backgroundColor = '#f8f9fa';
                } else {
                    content.style.border = 'none';
                    content.style.padding = '0';
                    content.style.backgroundColor = 'transparent';
                }
            });
            
            alert(isEditMode ? '–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∫–ª—é—á–µ–Ω!' : '–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–∫–ª—é—á–µ–Ω.');
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤
        function clearAllBlocks() {
            const currentPage = getCurrentPage();
            if (!currentPage) return;
            
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –±–ª–æ–∫–∏ –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ?')) {
                const blocksContainer = document.getElementById('blocks-container');
                const blocks = blocksContainer.querySelectorAll('[data-block-id]');
                
                // –ê–Ω–∏–º–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è
                blocks.forEach(block => {
                    block.style.opacity = '0';
                    block.style.transform = 'translateX(-100px)';
                });
                
                setTimeout(() => {
                    blocksContainer.innerHTML = '';
                    currentPage.blocks = [];
                    currentPage.blockCounter = 0;
                    blockCounter = 0;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç–æ–π –±–ª–æ–∫
                    addTextBlock('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—á–∏—â–µ–Ω–∞. –ù–∞—á–Ω–∏—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å –±–ª–æ–∫–∏!');
                    
                    alert('–í—Å–µ –±–ª–æ–∫–∏ —É–¥–∞–ª–µ–Ω—ã!');
                }, 300);
            }
        }

        // =================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ===================

        // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –±–ª–æ–∫–∞ –∏–∑ –¥–∞–Ω–Ω—ã—Ö
        function createBlockElement(blockData) {
            switch(blockData.type) {
                case 'text':
                    return createTextBlockElement(blockData);
                case 'code':
                    return createCodeBlockElement(blockData);
                case 'image':
                    return createImageBlockElement(blockData);
                default:
                    return null;
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞
        function createTextBlockElement(blockData) {
            const block = document.createElement('div');
            block.className = 'text-block';
            block.dataset.blockId = blockData.id;
            block.dataset.blockType = 'text';
            
            block.innerHTML = `
                <div class="block-controls-inline">
                    <button class="inline-btn edit" onclick="editTextBlock(this)">‚úèÔ∏è</button>
                    <button class="inline-btn delete" onclick="deleteBlock(this)">üóëÔ∏è</button>
                    <button class="inline-btn move-up" onclick="moveBlockUp(this)">‚¨ÜÔ∏è</button>
                    <button class="inline-btn move-down" onclick="moveBlockDown(this)">‚¨áÔ∏è</button>
                </div>
                <div class="text-block-content" contenteditable="true">
                    ${blockData.content}
                </div>
            `;
            
            return block;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–æ–¥–æ–≤–æ–≥–æ –±–ª–æ–∫–∞
        function createCodeBlockElement(blockData) {
            const language = blockData.content.language || 'bash';
            const code = blockData.content.code || '';
            const languageNames = {
                bash: 'Bash/Shell',
                html: 'HTML',
                css: 'CSS',
                js: 'JavaScript',
                python: 'Python'
            };
            
            const block = document.createElement('div');
            block.className = `code-block code-${language}`;
            block.dataset.blockId = blockData.id;
            block.dataset.blockType = 'code';
            
            block.innerHTML = `
                <div class="block-controls-inline">
                    <button class="inline-btn edit" onclick="editCodeBlock(this)">‚úèÔ∏è</button>
                    <button class="inline-btn delete" onclick="deleteBlock(this)">üóëÔ∏è</button>
                    <button class="inline-btn move-up" onclick="moveBlockUp(this)">‚¨ÜÔ∏è</button>
                    <button class="inline-btn move-down" onclick="moveBlockDown(this)">‚¨áÔ∏è</button>
                </div>
                <div class="code-header">
                    <div class="code-header-spacer"></div>
                    <div class="code-header-content">
                        <span class="code-language">${languageNames[language] || language}</span>
                    </div>
                    <div class="code-actions">
                        <button class="code-action-btn" onclick="copyCode(this)">
                            üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
                        </button>
                    </div>
                    <div class="code-header-spacer"></div>
                </div>
                <div class="code-content">
                    <pre><code>${code}</code></pre>
                </div>
            `;
            
            return block;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –±–ª–æ–∫–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
        function createImageBlockElement(blockData) {
            const block = document.createElement('div');
            block.className = 'image-block';
            block.dataset.blockId = blockData.id;
            block.dataset.blockType = 'image';
            
            let imageContent = '';
            if (blockData.content) {
                imageContent = `<img src="${blockData.content}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" class="image-block-content">`;
            } else {
                imageContent = `
                    <div class="image-placeholder" onclick="uploadImage(this)">
                        –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                        <span>PNG, JPG –∏–ª–∏ GIF, –¥–æ 5MB</span>
                    </div>
                `;
            }
            
            block.innerHTML = `
                <div class="block-controls-inline">
                    <button class="inline-btn edit" onclick="editImageBlock(this)">‚úèÔ∏è</button>
                    <button class="inline-btn delete" onclick="deleteBlock(this)">üóëÔ∏è</button>
                    <button class="inline-btn move-up" onclick="moveBlockUp(this)">‚¨ÜÔ∏è</button>
                    <button class="inline-btn move-down" onclick="moveBlockDown(this)">‚¨áÔ∏è</button>
                </div>
                ${imageContent}
            `;
            
            return block;
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function saveCurrentPage() {
            const currentPage = getCurrentPage();
            if (!currentPage) return;
            
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –±–ª–æ–∫–æ–≤
            const blocksContainer = document.getElementById('blocks-container');
            const blocks = blocksContainer.querySelectorAll('[data-block-id]');
            const blocksData = [];
            
            blocks.forEach(block => {
                const blockId = block.dataset.blockId;
                const blockType = block.dataset.blockType;
                let content = '';
                
                switch(blockType) {
                    case 'text':
                        content = block.querySelector('.text-block-content').innerHTML;
                        break;
                    case 'code':
                        const language = block.className.includes('code-bash') ? 'bash' :
                                      block.className.includes('code-html') ? 'html' :
                                      block.className.includes('code-css') ? 'css' :
                                      block.className.includes('code-js') ? 'js' : 'python';
                        const code = block.querySelector('code').textContent;
                        content = {
                            language: language,
                            code: code
                        };
                        break;
                    case 'image':
                        const img = block.querySelector('img');
                        content = img ? img.src : '';
                        break;
                }
                
                blocksData.push({
                    id: blockId,
                    type: blockType,
                    content: content
                });
            });
            
            currentPage.blocks = blocksData;
            currentPage.blockCounter = blockCounter;
            
            saveToStorage();
            updateStats();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            const currentPage = getCurrentPage();
            const blockCount = currentPage && currentPage.blocks ? currentPage.blocks.length : 0;
            
            document.getElementById('blockCount').textContent = blockCount;
            document.getElementById('pageCount').textContent = pages.length;
        }

        // =================== –°–û–•–†–ê–ù–ï–ù–ò–ï –ò –ó–ê–ì–†–£–ó–ö–ê ===================

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
        function saveToStorage() {
            const data = {
                pages: pages,
                currentPageId: currentPageId,
                blockCounter: blockCounter
            };
            
            localStorage.setItem('notebookData', JSON.stringify(data));
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        function loadFromStorage() {
            const savedData = localStorage.getItem('notebookData');
            
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    pages = data.pages || [];
                    currentPageId = data.currentPageId || 1;
                    blockCounter = data.blockCounter || 3;
                    
                    // –ï—Å–ª–∏ –Ω–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü, —Å–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é
                    if (pages.length === 0) {
                        createInitialPage();
                    }
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    loadPage(currentPageId);
                    updatePagesList();
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', e);
                    createInitialPage();
                }
            } else {
                createInitialPage();
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function createInitialPage() {
            pages = [{
                id: 1,
                name: '–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞',
                blocks: [
                    {
                        id: '1_1',
                        type: 'text',
                        content: '<p><strong>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ú–æ—é –¢–µ—Ç—Ä–∞–¥—å!</strong></p><p>–≠—Ç–æ –≤–∞—à–∞ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞. –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –¥–æ–±–∞–≤–ª—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –±–ª–æ–∫–∏ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.</p>'
                    },
                    {
                        id: '1_2',
                        type: 'code',
                        content: {
                            language: 'bash',
                            code: '# –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ç–µ—Ç—Ä–∞–¥—å!\necho "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"\n\n# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã\nuname -a\nwhoami'
                        }
                    },
                    {
                        id: '1_3',
                        type: 'image',
                        content: ''
                    }
                ],
                blockCounter: 3
            }];
            
            currentPageId = 1;
            blockCounter = 3;
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
            loadPage(currentPageId);
            updatePagesList();
            saveToStorage();
        }

        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞
        document.addEventListener('input', function(e) {
            if (e.target.classList.contains('text-block-content')) {
                saveCurrentPage();
            }
        });

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', function() {
            saveCurrentPage();
            saveToStorage();
        });
    </script>
</body>
</html>
